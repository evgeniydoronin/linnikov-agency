(()=>{"use strict";(()=>{function t(t){if(t instanceof Element||t===window)return t;{const e=document.querySelector(t);return e||new Error("Cannot find the target by selector: ".concat(t)),e}}Number.prototype.clamp=function(t,e){return Math.max(t,Math.min(this.valueOf(),e))};const e={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},i={update(){"undefined"!=typeof window&&("PointerEvent"in window?(i.hasApi=!0,i.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(i.hasApi=!0,i.requiresPrefix=!0):(i.hasApi=!1,i.requiresPrefix=void 0),i.maxTouchPoints=i.hasApi&&window.navigator&&window.navigator[i.prefix("maxTouchPoints")]||void 0,i.hasTouch=i.hasApi?i.maxTouchPoints>0:void 0)},prefix:t=>i.requiresPrefix&&e[t]||t};i.update();const o=(t,e)=>{let i,o=null;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];o?i=n:(t.call(this,...n),o=setTimeout((()=>{i&&(t.call(this,...n),i=null),o=null}),e))}};(()=>{const t=new Map;new ResizeObserver(o((e=>{e.forEach((e=>{let{target:i}=e;const o=i.getBoundingClientRect();t.get(i).updateInnerHeightStyle(o.height)}))}),10))})();const s=Inputmask("+9 (999) 999-99-99"),n=Inputmask({alias:"currency",groupSeparator:",",autoGroup:!0,digits:0,digitsOptional:!1,clearMaskOnLostFocus:!1,placeholder:""});console.log(n);const r=Inputmask({mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,onBeforePaste:function(t,e){return(t=t.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"},"-":{validator:"[0-9A-Za-z-]",cardinality:1,casing:"lower"}}});TomSelect.define("linnikov_custom",(function(){this.hook("after","setup",(()=>{const t=document.createElement("span");t.classList.add("icon-nav-check-arrow","ts-state-indicator"),this.control.append(t)})),this.hook("after","open",(()=>{this.dropdown.classList.add("open"),this.dropdown.setAttribute("aria-hidden",!1)})),this.hook("after","close",(()=>{this.dropdown.classList.remove("open"),this.dropdown.setAttribute("aria-hidden",!0),this.blur()}))})),$.validator.addMethod("tel-or-email",(function(t,e){return $.validator.methods.email.call(this,t,e)||/\+?[\d- \(\)]/.test(t)})),$.validator.addMethod("custom-tel",(function(t,e){return s.isValid(t)})),$.validator.addMethod("custom-email",(function(t,e){return r.isValid(t)}));class a{constructor(e){this.activeElem=null,this.timer=null,this.dom={root:t(e)}}async show(t,e,i){this.activeElem&&this.activeElem.classList.remove("active"),this.timer&&clearTimeout(this.timer);const o=this.dom.root.querySelector('[data-type="'.concat(t,'"]'));if(o.textContent=e||o.getAttribute("data-default"),o.classList.add("active"),this.activeElem=o,this.dom.root.classList.add("showed"),i)return new Promise((t=>{this.timer=setTimeout((()=>{t(),this.hide()}),i)}))}hide(){this.activeElem&&this.activeElem.classList.remove("active"),this.dom.root.classList.remove("showed")}}class d{static initTomSelect(t){const e={controlInput:null,plugins:{linnikov_custom:{}}};t.hasAttribute("data-no-clear-btn")||(e.plugins.clear_button={title:"Remove selected item"}),new TomSelect(t,e)}constructor(e){this.dom={root:t(e)},this.dom.body=this.dom.root.querySelector("[data-elem=body]"),this.dom.tomSelects=this.dom.root.querySelectorAll("[data-component=tom-select]"),this.dom.submitBtn=this.dom.root.querySelector("[data-elem=submit-btn]");let i=this.dom.root.querySelector('[data-component="form-messages"]')||document.querySelector('[data-component="form-messages"][data-for="'.concat(this.dom.root.getAttribute("id"),'"]'));this.messages=new a(i),this.initTomSelects(),this.initValidator()}async submitHandler(){}initTomSelects(){this.dom.tomSelects.forEach((t=>{d.initTomSelect(t)}))}initValidator(){this.validator=$(this.dom.root).validate({ignore:[],highlight:function(t,e,i){$(t).closest(".form-field").addClass(e)},unhighlight:function(t,e,i){$(t).closest(".form-field").removeClass(e)},errorPlacement:function(t,e){t.appendTo(e.closest(".form-field"))},submitHandler:async(t,e)=>{e.preventDefault(),this.disableSubmitBtn(),this.showSubmitBtnSpiner();try{await this.submitHandler(t,e),this.reset()}catch(t){console.error("Error while submitting form query",t),this.showMessage("error",t.message,5e3)}finally{this.enableSubmitBtn()}}})}disableSubmitBtn(){this.dom.submitBtn&&(this.dom.submitBtn.disabled=!0)}enableSubmitBtn(){this.dom.submitBtn&&(this.dom.submitBtn.classList.remove("waiting"),this.dom.submitBtn.disabled=!1)}showSubmitBtnSpiner(){this.dom.submitBtn.classList.add("waiting")}hideSubmitBtnSpiner(){this.dom.submitBtn.classList.remove("waiting")}reset(){this.dom.root.reset(),this.enableSubmitBtn()}async showMessage(t,e,i){return await this.messages.show(t,e,i)}hideMessages(){this.messages.hide()}}class l extends d{constructor(t){super(t),this.dom.closeBtn=this.dom.root.querySelector("[data-elem=close-btn]"),this.dom.closeBtn.addEventListener("click",(()=>this.onClose()))}async submitHandler(t,e){const i=await new Promise((t=>setTimeout((()=>t({ok:!0})),1e3)));if(i.ok)return this.hideSubmitBtn(),this.showCloseBtn(),this.showMessage("success"),null;throw new Error("Error (status: ".concat(i.status,") sending the form: ").concat(i.statusText))}onClose(){this.hideCloseBtn(),this.showSubmitBtn(),this.hideMessages()}hideSubmitBtn(){this.dom.submitBtn.classList.add("hidden")}showSubmitBtn(){this.dom.submitBtn.classList.remove("hidden")}showCloseBtn(){this.dom.closeBtn.classList.add("active")}hideCloseBtn(){this.dom.closeBtn.classList.remove("active")}}document.addEventListener("DOMContentLoaded",(function(){new l("#sign-up-form")}))})()})();