{"version":3,"file":"index.mjs","sources":["../src/mappings.ts","../src/index.ts"],"sourcesContent":["import { types as t, template } from \"@babel/core\";\nimport type { NodePath } from \"@babel/traverse\";\nimport type { MetaDescriptor } from \"@babel/helper-define-polyfill-provider\";\n\nconst expr = template.expression.ast;\n\nconst has = Function.call.bind(Object.hasOwnProperty);\n\nexport type Descriptor = {\n  name: string;\n  version: string;\n  package: string;\n  path: string; // This is different from .package for multi-entry-point packages,\n  pure?: false;\n  global?: false;\n  thisCheck?: (thisObj: any) => any;\n  exclude?: (meta: MetaDescriptor, path: NodePath) => boolean;\n  getter?: true;\n};\n\nexport const Globals = {};\nexport const StaticProperties = {};\nexport const InstanceProperties = {};\n\nconst lessThanArgs = num => (meta, path: NodePath) => {\n  const { node, parent } = path;\n  if (!t.isNewExpression(parent, { callee: node })) return false;\n  if (parent.arguments.length >= num) return false;\n  return parent.arguments.every(arg => !t.isSpreadElement(arg));\n};\n\nfor (const [name, causeArgNum] of [\n  [\"Error\", 2],\n  [\"AggregateError\", 3],\n  [\"EvalError\", 2],\n  [\"RangeError\", 2],\n  [\"ReferenceError\", 2],\n  [\"SyntaxError\", 2],\n  [\"TypeError\", 2],\n  [\"URIError\", 2],\n  // SuppressedError is not in this list because it does not have a cause\n] as [string, number][]) {\n  defineGlobal(name, \"1.0.1\", \"error-cause\", {\n    exclude: lessThanArgs(causeArgNum),\n    subfolder: name,\n    polyfillName: \"Error cause\",\n  });\n}\n// This needs to come after the AggregateError cause polyfill, since this\n// one polyfills less features.\ndefineGlobal(\"AggregateError\", \"1.0.2\", \"es-aggregate-error\");\nconst DATE_VERSION = \"2.0.0\";\n// MISSING DATA: defineGlobal(\"Date\", DATE_VERSION, \"date\", { subfolder: \"Date\" });\ndefineGlobal(\"globalThis\", \"1.0.0\");\ndefineGlobal(\"parseInt\", \"2.0.0\");\n\ndefineGlobal(\"Map\", \"1.0.4\", \"es-map\");\ndefineGlobal(\"Set\", \"1.1.0\", \"es-set\");\n\n// TODO: Uncomment when stage 4\n// defineGlobal(\"SuppressedError\", \"1.0.2\", \"suppressed-error\");\n// const DisposableStackPackage = [\"1.1.2\", \"disposablestack\"] as const;\n// defineGlobal(\"AsyncDisposableStack\", ...DisposableStackPackage, {\n//   subfolder: \"AsyncDisposableStack\",\n// });\n// defineGlobal(\"DisposableStack\", ...DisposableStackPackage, {\n//   subfolder: \"DisposableStack\",\n// });\n\nconst arrayCheck = thisObj => expr`Array.isArray(${thisObj})`;\nconst typeofCheck = type => thisObj => expr`typeof ${thisObj} === \"${type}\"`;\nconst instanceofCheck = Class => thisObj =>\n  expr`${thisObj} instanceof ${t.identifier(Class)}`;\nconst stringCheck = typeofCheck(\"string\");\n// const setCheck = instanceofCheck(\"Set\");\n\nconst getter = { getter: true };\nconst excludeStatic = obj => ({\n  exclude: meta =>\n    meta.kind === \"property\" &&\n    meta.placement === \"static\" &&\n    meta.object === obj,\n});\nconst excludeObject = excludeStatic(\"Object\");\n\ndefineStatic(\"Array\", \"from\", \"1.1.0\");\ndefineStatic(\"Array\", \"of\", \"1.0.0\");\ndefineInstance(\"Array\", \"at\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"concat\", \"1.0.2\", arrayCheck);\ndefineInstance(\"Array\", \"copyWithin\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"entries\", \"1.0.0\", arrayCheck, excludeObject);\ndefineInstance(\"Array\", \"every\", \"1.1.0\", arrayCheck);\ndefineInstance(\"Array\", \"filter\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"find\", \"2.1.1\", arrayCheck);\ndefineInstance(\"Array\", \"findIndex\", \"2.1.0\", arrayCheck);\ndefineInstance(\"Array\", \"findLast\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"findLastIndex\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"flat\", \"1.2.3\", arrayCheck);\ndefineInstance(\"Array\", \"flatMap\", \"1.2.3\", arrayCheck);\ndefineInstance(\"Array\", \"includes\", \"3.1.1\", arrayCheck, {\n  pkg: \"array-includes\",\n});\ndefineInstance(\"Array\", \"indexOf\", \"1.0.1\", arrayCheck);\n// MISSING DATA: defineInstance(\"Array\", \"join\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"keys\", \"1.0.0\", arrayCheck, excludeObject);\ndefineInstance(\"Array\", \"lastIndexOf\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"map\", \"1.0.2\", arrayCheck);\ndefineInstance(\"Array\", \"reduce\", \"1.0.1\", arrayCheck);\ndefineInstance(\"Array\", \"reduceRight\", \"1.0.1\", arrayCheck);\n// MISSING DATA: defineInstance(\"Array\", \"slice\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"some\", \"1.1.1\", arrayCheck);\ndefineInstance(\"Array\", \"splice\", \"1.0.1\", arrayCheck);\ndefineInstance(\"Array\", \"toReversed\", \"1.0.1\", arrayCheck);\ndefineInstance(\"Array\", \"toSorted\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"toSpliced\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"unshift\", \"1.0.0\", arrayCheck);\ndefineInstance(\"Array\", \"values\", \"1.0.0\", arrayCheck, excludeObject);\ndefineInstance(\"Array\", \"with\", \"1.0.1\", arrayCheck);\n\nfor (const name of [\n  \"now\",\n  // MISSING DATA: \"parse\"\n]) {\n  defineStatic(\"Date\", name, DATE_VERSION, {\n    pkg: \"date\",\n    subfolder: `Date.${name}`,\n  });\n}\nfor (const name of [\n  // MISSING DATA: \"getFullYear\",\n  // MISSING DATA: \"getMonth\",\n  // MISSING DATA: \"getDate\",\n  // MISSING DATA: \"getUTCDate\",\n  // MISSING DATA: \"getUTCFullYear\",\n  // MISSING DATA: \"getUTCMonth\",\n  // MISSING DATA: \"toUTCString\",\n  // MISSING DATA: \"toDateString\",\n  // MISSING DATA: \"toString\",\n  \"toISOString\",\n  \"toJSON\",\n]) {\n  defineInstance(\"Date\", name, DATE_VERSION, instanceofCheck(\"Date\"), {\n    pkg: \"date\",\n    subfolder: `Date.prototype.${name}`,\n  });\n}\n\ndefineInstance(\"Function\", \"name\", \"1.1.2\", typeofCheck(\"function\"), getter);\n\ndefineStatic(\"Math\", \"acosh\", \"1.0.0\");\ndefineStatic(\"Math\", \"atanh\", \"1.0.0\");\ndefineStatic(\"Math\", \"clz32\", \"1.0.0\");\ndefineStatic(\"Math\", \"cbrt\", \"1.0.0\");\ndefineStatic(\"Math\", \"fround\", \"1.0.0\");\ndefineStatic(\"Math\", \"log1p\", \"1.0.1\");\ndefineStatic(\"Math\", \"sign\", \"2.0.0\");\n\ndefineStatic(\"Number\", \"isFinite\", \"1.0.0\");\ndefineStatic(\"Number\", \"isInteger\", \"1.0.0\");\ndefineStatic(\"Number\", \"isSafeInteger\", \"1.0.0\");\ndefineStatic(\"Number\", \"isNaN\", \"1.0.0\", { pkg: \"number.isnan\" });\ndefineStatic(\"Number\", \"parseFloat\", \"1.0.0\");\ndefineStatic(\"Number\", \"parseInt\", \"1.0.0\");\n\ndefineStatic(\"Object\", \"assign\", \"4.1.0\");\ndefineStatic(\"Object\", \"defineProperties\", \"1.0.0\");\ndefineStatic(\"Object\", \"entries\", \"1.1.1\");\ndefineStatic(\"Object\", \"fromEntries\", \"2.0.2\");\ndefineStatic(\"Object\", \"hasOwn\", \"1.0.0\");\ndefineStatic(\"Object\", \"is\", \"1.1.2\", { pkg: \"object-is\" });\ndefineStatic(\"Object\", \"getOwnPropertyDescriptors\", \"2.1.0\");\ndefineStatic(\"Object\", \"getPrototypeOf\", \"1.0.1\");\ndefineStatic(\"Object\", \"values\", \"1.1.1\");\n\ndefineStatic(\"Promise\", \"allSettled\", \"1.0.2\");\ndefineStatic(\"Promise\", \"any\", \"2.0.1\");\ndefineStatic(\"Promise\", \"try\", \"1.0.0\");\ndefineInstance(\"Promise\", \"finally\", \"1.2.1\", instanceofCheck(\"Promise\"));\n\ndefineStatic(\"Reflect\", \"apply\", \"1.0.0\");\ndefineStatic(\"Reflect\", \"ownKeys\", \"1.0.1\");\ndefineStatic(\"Reflect\", \"getPrototypeOf\", \"1.0.0\");\n\ndefineInstance(\"RegExp\", \"flags\", \"1.3.0\", instanceofCheck(\"RegExp\"), getter);\n\n// TODO: Uncomment when Stage 4\n// defineInstance(\"Set\", \"difference\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"intersection\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"isDisjointFrom\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"isSubsetOf\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"isSupersetOf\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"symmetricDifference\", \"1.0.2\", setCheck);\n// defineInstance(\"Set\", \"union\", \"1.0.2\", setCheck);\n\ndefineStatic(\"String\", \"fromCodePoint\", \"1.0.0\");\ndefineStatic(\"String\", \"raw\", \"1.0.1\");\ndefineInstance(\"String\", \"codePoitAt\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"endsWith\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"includes\", \"2.0.0\", stringCheck);\ndefineInstance(\"String\", \"isWellFormed\", \"1.0.1\", stringCheck);\ndefineInstance(\"String\", \"at\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"matchAll\", \"4.0.2\", stringCheck);\ndefineInstance(\"String\", \"padEnd\", \"1.1.1\", stringCheck);\ndefineInstance(\"String\", \"padStart\", \"3.1.0\", stringCheck);\ndefineInstance(\"String\", \"repeat\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"replaceAll\", \"1.0.3\", stringCheck);\ndefineInstance(\n  \"String\",\n  \"split\",\n  \"1.0.1\",\n  stringCheck,\n  excludeStatic(\"Symbol\"),\n);\ndefineInstance(\"String\", \"startsWith\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"substr\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"toWellFormed\", \"1.0.1\", stringCheck);\ndefineInstance(\"String\", \"trim\", \"1.2.1\", stringCheck);\ndefineInstance(\"String\", \"trimEnd\", \"1.0.0\", stringCheck);\ndefineInstance(\"String\", \"trimLeft\", \"2.1.1\", stringCheck);\ndefineInstance(\"String\", \"trimRight\", \"2.1.1\", stringCheck);\ndefineInstance(\"String\", \"trimStart\", \"1.0.0\", stringCheck);\n\ndefineInstance(\n  \"Symbol\",\n  \"description\",\n  \"1.0.2\",\n  instanceofCheck(\"Symbol\"),\n  getter,\n);\n\n// Annex B\nfor (const name of [\n  \"anchor\",\n  \"big\",\n  \"blink\",\n  \"bold\",\n  \"fixed\",\n  \"fontcolor\",\n  \"fontsize\",\n  \"italics\",\n  \"link\",\n  \"small\",\n  \"strike\",\n  \"sub\",\n  \"sup\",\n]) {\n  defineInstance(\"String\", name, \"1.0.0\", stringCheck, {\n    pkg: `es-string-html-methods`,\n    subfolder: name,\n  });\n}\n\nfunction createDescriptor(name, version, pkg = name.toLowerCase(), subfolder?) {\n  return {\n    name,\n    version,\n    package: pkg,\n    path: subfolder ? `${pkg}/${subfolder}` : pkg,\n  };\n}\n\ntype ExcludeFilter = (meta: MetaDescriptor, path: NodePath) => boolean;\n\nfunction defineGlobal(\n  name,\n  version,\n  pkg?,\n  {\n    exclude,\n    subfolder,\n    polyfillName = name,\n  }: {\n    exclude?: ExcludeFilter;\n    subfolder?: string;\n    polyfillName?: string;\n  } = {},\n) {\n  if (!has(Globals, name)) Globals[name] = [];\n  Globals[name].push({\n    ...createDescriptor(polyfillName, version, pkg, subfolder),\n    exclude,\n    nameHint: name,\n  });\n}\n\nfunction defineStatic(\n  object,\n  property,\n  version,\n  { pkg, subfolder }: { pkg?: string; subfolder?: string } = {},\n) {\n  if (!has(StaticProperties, object)) StaticProperties[object] = {};\n\n  StaticProperties[object][property] = [\n    createDescriptor(`${object}.${property}`, version, pkg, subfolder),\n  ];\n}\n\nfunction defineInstance(\n  object,\n  property,\n  version,\n  thisCheck,\n  {\n    getter = false,\n    exclude,\n    pkg,\n    subfolder,\n  }: {\n    getter?: boolean;\n    exclude?: ExcludeFilter;\n    pkg?: string;\n    subfolder?: string;\n  } = {},\n) {\n  if (!has(InstanceProperties, property)) InstanceProperties[property] = [];\n\n  InstanceProperties[property].push({\n    ...createDescriptor(\n      `${object}.prototype.${property}`,\n      version,\n      pkg,\n      subfolder,\n    ),\n    thisCheck,\n    exclude,\n    getter,\n  });\n}\n","import defineProvider, {\n  type Utils,\n  type MetaDescriptor,\n} from \"@babel/helper-define-polyfill-provider\";\nimport type { NodePath } from \"@babel/traverse\";\n\nimport polyfills from \"../data/polyfills.js\";\n\nimport {\n  type Descriptor,\n  Globals,\n  StaticProperties,\n  InstanceProperties,\n} from \"./mappings\";\n\nexport default defineProvider<{}>(function ({\n  shouldInjectPolyfill,\n  assertDependency,\n  createMetaResolver,\n  debug,\n  babel: { template, types: t },\n}) {\n  const expr = template.expression.ast;\n\n  const resolvePolyfill = createMetaResolver<Descriptor[]>({\n    global: Globals,\n    static: StaticProperties,\n    instance: InstanceProperties,\n  });\n\n  function createDescIterator(\n    cb: (desc: Descriptor, utils: Utils, path: NodePath) => void,\n    instance?: (\n      meta: MetaDescriptor,\n      resolved: any,\n      utils: Utils,\n      path: any,\n    ) => void,\n  ) {\n    return (meta: MetaDescriptor, utils: Utils, path: NodePath): undefined => {\n      if (path.parentPath.isUnaryExpression({ operator: \"delete\" })) return;\n\n      const resolved = resolvePolyfill(meta);\n      if (!resolved) return;\n\n      if (instance && resolved.kind === \"instance\") {\n        instance(meta, resolved, utils, path);\n        return;\n      }\n\n      for (const desc of resolved.desc) {\n        if (!desc.exclude?.(meta, path) && shouldInjectPolyfill(desc.name)) {\n          cb(desc, utils, path);\n\n          // Since global and static polyfills are unambiguous, we only need to\n          // inject the first non-excluded one.\n          if (resolved.kind !== \"instance\") {\n            break;\n          }\n        }\n      }\n    };\n  }\n\n  function injectDefault(desc, utils) {\n    assertDependency(desc.package, desc.version);\n    debug(desc.name);\n\n    return utils.injectDefaultImport(desc.path, desc.nameHint || desc.name);\n  }\n\n  const seen = new WeakSet();\n\n  return {\n    name: \"es-shims\",\n    polyfills,\n\n    usageGlobal: createDescIterator((desc, utils) => {\n      if (desc.global === false) return;\n\n      assertDependency(desc.package, desc.version);\n\n      utils.injectGlobalImport(`${desc.path}/auto`);\n\n      debug(desc.name);\n    }),\n\n    usagePure: createDescIterator(\n      (desc, utils, path) => {\n        path.replaceWith(injectDefault(desc, utils));\n      },\n      (meta, resolved, utils, path) => {\n        if (meta.kind !== \"property\") return;\n        if (path.parentPath.isAssignmentExpression({ left: path.node })) return;\n\n        if (seen.has(path.node)) return;\n        seen.add(path.node);\n\n        const isCall = path.parentPath.isCallExpression({ callee: path.node });\n        const isGetter = resolved.desc[0].getter;\n\n        const matchesPolyfill = ({ name }) =>\n          name.startsWith(meta.object as any as string);\n\n        let index = -1;\n        if (\n          // This is the actual method for sure.\n          meta.kind === \"property\" &&\n          meta.placement === \"prototype\" &&\n          meta.object != null &&\n          (index = resolved.desc.findIndex(matchesPolyfill)) !== -1\n        ) {\n          const desc = resolved.desc[index];\n          if (!shouldInjectPolyfill(desc.name)) return;\n\n          const id = injectDefault(desc, utils);\n\n          if (isGetter) {\n            path.replaceWith(expr`${id}(${path.node.object})`);\n          } else if (isCall) {\n            path.parentPath.unshiftContainer(\"arguments\", path.node.object);\n            path.replaceWith(id);\n          } else if (\n            path.parentPath.isMemberExpression({\n              object: path.node,\n              computed: false,\n            }) &&\n            path.parent.property.name === \"call\" &&\n            path.parentPath.parentPath.isCallExpression({ callee: path.parent })\n          ) {\n            path.parentPath.replaceWith(id);\n          } else {\n            path.replaceWith(expr`${id}.getPolyfill()`);\n          }\n        } else {\n          let tmp;\n          let parent;\n          let replacement = path.node;\n          const { object } = path.node;\n\n          for (const desc of resolved.desc) {\n            const { thisCheck } = desc;\n            if (\n              !thisCheck ||\n              desc.exclude?.(meta) ||\n              !shouldInjectPolyfill(desc.name)\n            ) {\n              continue;\n            }\n\n            if (!tmp) {\n              tmp = path.scope.generateUidIdentifierBasedOnNode(object);\n              path.scope.push({ id: t.cloneNode(tmp) });\n              path.get(\"object\").replaceWith(tmp);\n            }\n\n            const id = injectDefault(desc, utils);\n\n            replacement = t.conditionalExpression(\n              thisCheck(t.cloneNode(tmp)),\n              isGetter\n                ? expr`${id}(${t.cloneNode(tmp)})`\n                : isCall\n                  ? id\n                  : expr`${id}.getPolyfill()`,\n              replacement,\n            );\n\n            parent = parent ?? replacement;\n          }\n\n          if (!parent) return;\n\n          replacement = expr`(${t.cloneNode(tmp)} = ${object}, ${replacement})`;\n\n          if (!isGetter && isCall) {\n            parent.alternate = expr`Function.call.bind(${parent.alternate})`;\n            path.parentPath.unshiftContainer(\"arguments\", t.cloneNode(tmp));\n          }\n\n          path.replaceWith(replacement);\n        }\n      },\n    ),\n  };\n});\n"],"names":["types","t","template","_babel","default","expr","expression","ast","has","Function","call","bind","Object","hasOwnProperty","Globals","StaticProperties","InstanceProperties","lessThanArgs","num","meta","path","node","parent","isNewExpression","callee","arguments","length","every","arg","isSpreadElement","name","causeArgNum","defineGlobal","exclude","subfolder","polyfillName","DATE_VERSION","arrayCheck","thisObj","typeofCheck","type","instanceofCheck","Class","identifier","stringCheck","getter","excludeStatic","obj","kind","placement","object","excludeObject","defineStatic","defineInstance","pkg","createDescriptor","version","toLowerCase","package","push","nameHint","property","thisCheck","defineProvider","shouldInjectPolyfill","assertDependency","createMetaResolver","debug","babel","resolvePolyfill","global","static","instance","createDescIterator","cb","utils","parentPath","isUnaryExpression","operator","resolved","desc","injectDefault","injectDefaultImport","seen","WeakSet","polyfills","usageGlobal","injectGlobalImport","usagePure","replaceWith","isAssignmentExpression","left","add","isCall","isCallExpression","isGetter","matchesPolyfill","startsWith","index","findIndex","id","unshiftContainer","isMemberExpression","computed","tmp","replacement","_parent","scope","generateUidIdentifierBasedOnNode","cloneNode","get","conditionalExpression","alternate"],"mappings":"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"}