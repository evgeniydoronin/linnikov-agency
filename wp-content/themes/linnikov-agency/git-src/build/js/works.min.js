(()=>{"use strict";(()=>{Number.prototype.clamp=function(t,e){return Math.max(t,Math.min(this.valueOf(),e))};const t={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},e={update(){"undefined"!=typeof window&&("PointerEvent"in window?(e.hasApi=!0,e.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(e.hasApi=!0,e.requiresPrefix=!0):(e.hasApi=!1,e.requiresPrefix=void 0),e.maxTouchPoints=e.hasApi&&window.navigator&&window.navigator[e.prefix("maxTouchPoints")]||void 0,e.hasTouch=e.hasApi?e.maxTouchPoints>0:void 0)},prefix:o=>e.requiresPrefix&&t[o]||o};e.update();const o=(t,e)=>{let o,r=null;return function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];r?o=n:(t.call(this,...n),r=setTimeout((()=>{o&&(t.call(this,...n),o=null),r=null}),e))}};class r{constructor(t){let{container:e,targetSelector:r}=t;this.pointerMoveHandler=o((t=>{let{target:e,clientX:o,clientY:r}=t;const i=e.matches(this.targetSelector)?e:e.closest(this.targetSelector);if(!i)return;const n=i.getBoundingClientRect(),a=Math.max(0,o-n.left),s=Math.max(0,r-n.top);i.style.setProperty("--pointer-left","".concat(a,"px")),i.style.setProperty("--pointer-top","".concat(s,"px"))}),20),this.targetSelector=r,this.container=function(t){if(t instanceof Element||t===window)return t;{const e=document.querySelector(t);return e||new Error("Cannot find the target by selector: ".concat(t)),e}}(e),this.container.addEventListener("".concat(app.state.pointerType,"move"),this.pointerMoveHandler)}}class i{constructor(t){let{onCategoryChangeScroll:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dom={},this.currentCategory=null,this.vars={onCategoryChangeScroll:e},this.dom.rootElem=document.querySelector(t),this.dom.body=this.dom.rootElem.querySelector("[data-top-cases-elem=body]"),this.dom.body.style.setProperty("--transition","".concat(i.transition,"s")),this.dom.filter=this.dom.rootElem.querySelector(".top-cases__filter"),this.init()}init(){const t=()=>{const t=location.hash.slice(1);this.showCategory(t||"all")};t(),this.vars.onCategoryChangeScroll&&window.app.state.isMobile&&this.dom.filter.addEventListener("click",(()=>this.scrollToTop())),window.addEventListener("hashchange",t)}scrollToTop(){window.lenis.scrollTo(this.dom.filter,{offset:this.vars.onCategoryChangeScroll.offset})}async showCategory(t){const e=this.dom.rootElem.querySelector('a[href="#'.concat(this.currentCategory,'"]'));null==e||e.classList.remove("active");const o=this.dom.rootElem.querySelector('a[href="#'.concat(t,'"]'));null==o||o.classList.add("active"),this.currentCategory=t;const r=this.selectVisibleCards(),i=this.selectCategoryCards(t);this.markParity(r),await this.animateHidding(r),this.markParity(i),await this.animateShowing(i)}async animateHidding(t){t.forEach((t=>t.classList.remove("showing"))),t.forEach((t=>t.classList.add("hidding"))),await new Promise((e=>setTimeout((()=>{"all"!==this.currentCategory&&t.filter((t=>t.getAttribute("data-category")!==this.currentCategory)).forEach((t=>t.classList.add("hidden"))),t.forEach((t=>t.classList.remove("hidding"))),e()}),i.transition/2*1e3)))}async animateShowing(t){t.forEach((t=>t.classList.remove("hidden"))),requestAnimationFrame((()=>{t.forEach((t=>t.classList.add("showing")))})),await new Promise((e=>setTimeout((()=>{t.forEach((t=>t.classList.remove("showing"))),e()}),i.transition/2*1e3)))}selectNotInCategoryCards(t){return"all"===t?[]:Array.from(this.dom.body.querySelectorAll("*:not([data-category*=".concat(t,"])")))}selectCategoryCards(t){const e="all"===t?"*":"[data-category*=".concat(t,"]");return Array.from(this.dom.body.querySelectorAll(e))}selectVisibleCards(){return Array.from(this.dom.body.querySelectorAll("[data-top-cases-elem=body] > *:not(.hidden)"))}markParity(t){t.forEach(((t,e)=>e%2?t.setAttribute("data-parity","odd"):t.setAttribute("data-parity","even")))}bindFancybox(){$('[data-top-cases-elem="body"] > *:not(.hidden)').fancybox({smallBtn:!1,toolbar:!1,preventCaptionOverlap:!1,contentFit:!0})}unbindFancybox(){$('[data-top-cases-elem="body"] > *').unbind("click.fb")}}i.transition=.8,document.addEventListener("DOMContentLoaded",(function(){const t=new i("#top-cases");new r({container:t.dom.body,targetSelector:".case-poster",className:"case-poster__title"})}))})()})();